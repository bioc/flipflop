## Generates warning (non-portable flag) when building R package
##ifndef SHLIB_OPENMP_CXXFLAGS
##  SHLIB_OPENMP_CXXFLAGS= -fopenmp
##endif

EXTRA_LIBS=

ifeq ($(shell uname),Darwin)
   EXTRA_LIBS= -lcblas
endif

PKG_CXXFLAGS = -I. -Ispams/linalg -Ispams/prox -Ispams/decomp -Ispams/dags $(SHLIB_OPENMP_CXXFLAGS) $(OPT_DBG) -DUSE_BLAS_LIB -DNDEBUG 

# -s to strip the .so 
PKG_LIBS = -s $(SHLIB_OPENMP_CXXFLAGS) -lstdc++ $(BLAS_LIBS) $(LAPACK_LIBS) $(EXTRA_LIBS) $(FLIBS)

# all: $(SHLIB)

# R_init_flipflop.o: spams.o

# flipflop.so: R_init_flipflop.o


## Generates "Non-portable flags in variable ‘PKG_CXXFLAGS’" warning
## when building R package.
## ifeq (${CXX},g++)
##    PKG_CXXFLAGS+= -mtune=nocona
## endif

## Flag -O3 is compiler specific. In practice if compiler is CXX=g++,
## the R/Makeconf file already puts O3 flag in CXX_FLAGS
